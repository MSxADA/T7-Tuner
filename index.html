<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Douk T7 Ultimate Tuner</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            background-color: #020617; /* Slate 950 */
            color: white;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        
        /* Custom Animations */
        .knob-rotate {
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .glow-pulse {
            animation: pulse-glow 3s infinite;
        }
        @keyframes pulse-glow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- INTERNAL ICONS (No Dependencies) ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const icons = {
                headphones: <path d="M3 14v-3a9 9 0 0 1 18 0v3M3 19a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2h-2zM17 14a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2h-2z" />,
                speaker: <path d="M12 6L8 10H4v4h4l4 4V6zM17 7a5 5 0 0 1 0 10M15.5 10.5a2.5 2.5 0 0 1 0 3" />,
                music: <path d="M9 18V5l12-2v13M9 9l12-2M6 18a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM18 16a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />,
                sliders: <path d="M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6" />,
                info: <><circle cx="12" cy="12" r="10" /><line x1="12" y1="16" x2="12" y2="12" /><line x1="12" y1="8" x2="12.01" y2="8" /></>,
                check: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14M22 4L12 14.01l-3-3" />
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || icons.info}
                </svg>
            );
        };

        const DoukT7Visualizer = () => {
            const MIN_DEG = -150;
            const MAX_DEG = 150;
            const MIN_DB = -6;
            const MAX_DB = 6;

            // --- CONFIGURATION ---
            const outputs = {
                lcd2c: {
                    id: 'lcd2c',
                    name: "Audeze LCD-2C",
                    desc: "Warm & Dark Planar. Needs upper-mids & air.",
                    accent: "#f59e0b", // Amber
                    icon: "headphones"
                },
                arya: {
                    id: 'arya',
                    name: "Hifiman Arya",
                    desc: "Bright & Airy Planar. Needs bass warmth & anti-glare.",
                    accent: "#22d3ee", // Cyan
                    icon: "headphones"
                },
                stereo: {
                    id: 'stereo',
                    name: "Def Tech DM60",
                    desc: "Stereo Mode. Tuned for Room Acoustics & Bipolar Towers.",
                    accent: "#10b981", // Emerald
                    icon: "speaker"
                }
            };

            const [selectedOutput, setSelectedOutput] = useState('lcd2c');
            const [activePresetKey, setActivePresetKey] = useState('neutral');
            const [activeCategory, setActiveCategory] = useState('calibration');

            // Values: [LCD-2C, Arya, Stereo]
            const presets = {
                calibration: {
                    title: "Base Calibration",
                    icon: "info",
                    items: {
                        neutral: {
                            name: "Stock / Neutral",
                            desc: {
                                lcd2c: "Restores the 'veiled' mids (2k) and adds air (8k).",
                                arya: "Tames the 4kHz/8kHz treble spikes. Adds body.",
                                stereo: "Balances the room. Cuts 125Hz boom and 4k tweeter glare."
                            },
                            vals: { 64:[0,1,0], 125:[0,0,-1.5], 250:[0,0,0], 500:[0,0,0.5], '2k':[1.5,0,-1], '4k':[4.5,-2,-1], '8k':[3,-3,0] }
                        }
                    }
                },
                styles: {
                    title: "Listening Styles",
                    icon: "sliders",
                    items: {
                        warmth: {
                            name: "Fuller Bass & Warmth",
                            desc: { lcd2c: "Thickens low end.", arya: "Essential body adder.", stereo: "Tube warmth emulation." },
                            vals: { 64:[3.5,4.5,2], 125:[4,4,3], 250:[2,2,2], 500:[0,0,0], '2k':[-1,-1,-1], '4k':[-1,-3,-2], '8k':[0,-3,-2] }
                        },
                        energetic: {
                            name: "Energetic & Forward",
                            desc: { lcd2c: "Brings vocals closer.", arya: "Aggressive detail.", stereo: "Live concert feel." },
                            vals: { 64:[1,2,1], 125:[0,1,0], 250:[-1,0,-1], 500:[0,-1,0], '2k':[2,0,1], '4k':[3,-1,1], '8k':[4,1,2] }
                        },
                        smooth: {
                            name: "Smooth & Relaxed",
                            desc: { lcd2c: "Anti-shout cut.", arya: "De-Esser mode.", stereo: "Late night listening." },
                            vals: { 64:[1,2.5,1], 125:[1,2,1], 250:[0,1,0], 500:[0,0,0], '2k':[-3.5,-2,-2], '4k':[-1,-4,-2], '8k':[2,-4,-3] }
                        },
                        theater: {
                            name: "Theater / Cinema",
                            desc: { lcd2c: "Rumble & dialogue.", arya: "Cinematic weight.", stereo: "Blockbuster mode. Huge Sub-bass." },
                            vals: { 64:[5,6,4], 125:[2,3,1], 250:[0,1,0], 500:[-2,-1,-1], '2k':[2,0,2], '4k':[3,-1,0], '8k':[4,0,2] }
                        }
                    }
                },
                genres: {
                    title: "Music Genres",
                    icon: "music",
                    items: {
                        classicrock: {
                            name: "Classic Rock",
                            desc: { lcd2c: "Groove mode.", arya: "Vintage warmth.", stereo: "70s Hi-Fi sound." },
                            vals: { 64:[2,3,1], 125:[3.5,4,3], 250:[1,2,1], 500:[-1.5,-1,-1], '2k':[-3.5,-2,-2], '4k':[0,-2,-1], '8k':[3,-1,1] }
                        },
                        metal: {
                            name: "Metal",
                            desc: { lcd2c: "Impact / Anti-shout.", arya: "Bass slam needed.", stereo: "Double-kick power." },
                            vals: { 64:[4,5,4], 125:[1.5,3,0], 250:[0,1,0], 500:[-2,-1,-1], '2k':[-3,-2,-3], '4k':[0.5,-2,0], '8k':[4,-1,1] }
                        },
                        jazz: {
                            name: "Jazz",
                            desc: { lcd2c: "Cymbal detail.", arya: "Double bass body.", stereo: "Smoke-filled room." },
                            vals: { 64:[1,2,0], 125:[2.5,3,2], 250:[0,1,1], 500:[-1,0,0], '2k':[-2.5,-2,-1], '4k':[1,-2,-2], '8k':[3.5,-1,1] }
                        },
                        electronic: {
                            name: "Electronic",
                            desc: { lcd2c: "Sub-bass party.", arya: "Bass cannon.", stereo: "Club mode." },
                            vals: { 64:[5.5,6,5], 125:[2,3,1], 250:[-1,0,-1], 500:[-2,-1,-2], '2k':[-1,-1,0], '4k':[2,0,1], '8k':[5,1,3] }
                        }
                    }
                }
            };

            // --- LOGIC ---
            const getIndex = (id) => id === 'lcd2c' ? 0 : id === 'arya' ? 1 : 2;
            
            const handleOutputSwitch = (id) => {
                setSelectedOutput(id);
                setActivePresetKey('neutral');
                setActiveCategory('calibration');
            };

            const activeOutput = outputs[selectedOutput];
            const activeSetGroup = { ...presets.calibration.items, ...presets.styles.items, ...presets.genres.items };
            const activePresetData = activeSetGroup[activePresetKey];
            
            const currentValues = {};
            const idx = getIndex(selectedOutput);
            
            if (activePresetData) {
                Object.keys(activePresetData.vals).forEach(k => {
                    currentValues[k] = activePresetData.vals[k][idx] !== undefined ? activePresetData.vals[k][idx] : activePresetData.vals[k][0];
                });
            }

            // --- RENDER ---
            return (
                <div className="min-h-screen flex flex-col items-center p-4 md:p-8">
                    
                    {/* HEADER */}
                    <div className="text-center mb-8">
                        <h1 className="text-4xl md:text-5xl font-black text-white mb-2 tracking-tight">
                            DOUK T7 <span style={{ color: activeOutput.accent }}>TUNER</span>
                        </h1>
                        <p className="text-slate-500 text-xs font-bold uppercase tracking-[0.3em]">
                            Calibration Tool v5.0
                        </p>
                    </div>

                    {/* OUTPUT SELECTOR */}
                    <div className="w-full max-w-4xl grid grid-cols-3 gap-4 mb-10">
                        {Object.values(outputs).map((out) => {
                            const isSelected = selectedOutput === out.id;
                            return (
                                <button
                                    key={out.id}
                                    onClick={() => handleOutputSwitch(out.id)}
                                    className={`relative p-4 rounded-xl border-2 transition-all duration-300 flex flex-col items-center gap-3 overflow-hidden group`}
                                    style={{
                                        borderColor: isSelected ? out.accent : '#1e293b',
                                        backgroundColor: isSelected ? 'rgba(15, 23, 42, 0.8)' : 'rgba(15, 23, 42, 0.4)',
                                        boxShadow: isSelected ? `0 0 20px ${out.accent}20` : 'none'
                                    }}
                                >
                                    {/* Top Bar Color */}
                                    <div className="absolute top-0 left-0 w-full h-1" style={{ background: `linear-gradient(90deg, transparent, ${out.accent}, transparent)`, opacity: isSelected ? 1 : 0 }}></div>
                                    
                                    <div style={{ color: isSelected ? out.accent : '#64748b' }}>
                                        <Icon name={out.icon} size={24} />
                                    </div>
                                    <span className={`font-bold text-sm md:text-base ${isSelected ? 'text-white' : 'text-slate-400'}`}>
                                        {out.name}
                                    </span>
                                    
                                    {isSelected && (
                                        <div className="absolute -right-2 -bottom-2 opacity-10" style={{ color: out.accent }}>
                                            <Icon name="check" size={64} />
                                        </div>
                                    )}
                                </button>
                            );
                        })}
                    </div>

                    {/* MAIN CONTENT GRID */}
                    <div className="w-full max-w-7xl grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        {/* LEFT: PRESETS */}
                        <div className="lg:col-span-4 flex flex-col gap-6">
                            {/* Styles */}
                            <PresetGroup 
                                title={presets.styles.title} 
                                icon={presets.styles.icon}
                                items={presets.styles.items}
                                activeKey={activePresetKey}
                                onSelect={(key) => { setActiveCategory('styles'); setActivePresetKey(key); }}
                                accent={activeOutput.accent}
                            />
                            {/* Genres */}
                            <PresetGroup 
                                title={presets.genres.title} 
                                icon={presets.genres.icon}
                                items={presets.genres.items}
                                activeKey={activePresetKey}
                                onSelect={(key) => { setActiveCategory('genres'); setActivePresetKey(key); }}
                                accent={activeOutput.accent}
                            />
                        </div>

                        {/* RIGHT: VISUALIZER */}
                        <div className="lg:col-span-8">
                            <div className="w-full bg-slate-900 rounded-3xl border border-slate-700 p-6 md:p-10 shadow-2xl relative overflow-hidden min-h-[500px] flex flex-col justify-center">
                                
                                {/* Ambient Glow */}
                                <div className="absolute top-0 left-0 w-full h-1 opacity-60" style={{ background: `linear-gradient(90deg, transparent, ${activeOutput.accent}, transparent)` }}></div>
                                <div className="absolute -top-40 -right-40 w-96 h-96 rounded-full blur-3xl pointer-events-none" style={{ background: activeOutput.accent, opacity: 0.05 }}></div>

                                {/* Info Panel */}
                                <div className="mb-12 relative z-10">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-3xl font-bold text-white">
                                            {activePresetData.name}
                                        </h2>
                                        <span className="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border"
                                              style={{ borderColor: activeOutput.accent, color: activeOutput.accent, backgroundColor: `${activeOutput.accent}10` }}>
                                            {activeOutput.name} Tuning
                                        </span>
                                    </div>
                                    <div className="flex gap-3 border-l-2 border-slate-700 pl-4">
                                        <div className="mt-1" style={{ color: activeOutput.accent }}><Icon name="info" size={18} /></div>
                                        <p className="text-slate-300 text-sm leading-relaxed">
                                            {activePresetData.desc[selectedOutput]}
                                        </p>
                                    </div>
                                </div>

                                {/* KNOBS ROW */}
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-y-12 gap-x-4 justify-items-center relative z-10">
                                    {[
                                        { label: '64 Hz', key: '64' },
                                        { label: '125 Hz', key: '125' },
                                        { label: '250 Hz', key: '250' },
                                        { label: '500 Hz', key: '500' },
                                        { label: '2 kHz', key: '2k' },
                                        { label: '4 kHz', key: '4k' },
                                        { label: '8 kHz', key: '8k' },
                                    ].map((band) => (
                                        <Knob 
                                            key={band.key}
                                            label={band.label}
                                            value={currentValues[band.key]}
                                            accent={activeOutput.accent}
                                            minDb={MIN_DB}
                                            maxDb={MAX_DB}
                                            minDeg={MIN_DEG}
                                            maxDeg={MAX_DEG}
                                        />
                                    ))}
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- SUB COMPONENTS ---

        const PresetGroup = ({ title, icon, items, activeKey, onSelect, accent }) => (
            <div className="bg-slate-900/60 border border-slate-800 rounded-2xl p-5 shadow-lg backdrop-blur-sm">
                <h3 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2">
                    <Icon name={icon} size={16} />
                    {title}
                </h3>
                <div className="grid grid-cols-2 gap-2">
                    {Object.entries(items).map(([key, item]) => {
                        const isActive = activeKey === key;
                        return (
                            <button
                                key={key}
                                onClick={() => onSelect(key)}
                                className="px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 text-left relative overflow-hidden"
                                style={{
                                    backgroundColor: isActive ? '#1e293b' : 'transparent',
                                    color: isActive ? 'white' : '#94a3b8',
                                    border: '1px solid',
                                    borderColor: isActive ? `${accent}40` : 'transparent'
                                }}
                            >
                                <span className="relative z-10">{item.name}</span>
                                {isActive && <div className="absolute left-0 top-0 bottom-0 w-1" style={{ background: accent }}></div>}
                            </button>
                        );
                    })}
                </div>
            </div>
        );

        const Knob = ({ label, value, accent, minDb, maxDb, minDeg, maxDeg }) => {
            // Math
            const ratio = (value - minDb) / (maxDb - minDb);
            const rotation = ratio * (maxDeg - minDeg) + minDeg;
            
            // Colors
            const isBoost = value > 0.1;
            const isCut = value < -0.1;
            const activeColor = isCut ? '#f43f5e' : (isBoost ? accent : '#64748b');
            const glowShadow = (isBoost || isCut) ? `0 0 15px ${activeColor}40` : 'none';

            // Clock String
            const getClock = (v) => {
                if (Math.abs(v) < 0.2) return "12:00";
                let h = 12 + (v / 1.2);
                if (h > 12.99) h -= 12;
                if (h < 1) h += 12;
                let m = Math.round((h % 1) * 60);
                return `${Math.floor(h)}:${m < 10 ? '0'+m : m}`;
            };

            return (
                <div className="flex flex-col items-center w-full group">
                    <span className="text-[10px] font-bold uppercase tracking-widest mb-4 text-slate-500">{label}</span>
                    
                    {/* KNOB BODY */}
                    <div className="relative w-16 h-16">
                        {/* Tick Ring */}
                        <svg className="absolute inset-0 w-full h-full opacity-30" viewBox="0 0 100 100">
                            <path d="M20 80 A 40 40 0 1 1 80 80" fill="none" stroke="currentColor" strokeWidth="6" strokeLinecap="round" />
                        </svg>
                        
                        {/* Rotating Part */}
                        <div 
                            className="w-14 h-14 bg-slate-800 rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-2 border-slate-700 flex items-center justify-center knob-rotate"
                            style={{ 
                                transform: `translate(-50%, -50%) rotate(${rotation}deg)`,
                                boxShadow: glowShadow
                            }}
                        >
                            {/* Indicator Line */}
                            <div 
                                className="w-1 h-5 rounded-full absolute -top-0.5"
                                style={{ backgroundColor: activeColor, boxShadow: `0 0 5px ${activeColor}` }}
                            ></div>
                            
                            {/* Metallic Shine Overlay */}
                            <div className="w-full h-full rounded-full bg-gradient-to-tr from-white/10 to-transparent pointer-events-none"></div>
                        </div>
                    </div>

                    {/* VALUE DISPLAY */}
                    <div className="mt-3 flex flex-col items-center gap-1">
                        <div 
                            className="flex items-center justify-center w-12 py-0.5 rounded border border-slate-800 bg-slate-900/80"
                            style={{ color: activeColor }}
                        >
                            <span className="text-sm font-mono font-bold">{value > 0 ? '+' : ''}{value}</span>
                        </div>
                        <span className="text-[10px] font-mono text-slate-600">{getClock(value)}</span>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DoukT7Visualizer />);
    </script>
</body>
</html>


