<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Douk T7 Ultimate Tuner</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Specific Stable Versions) -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            background-color: #020617; /* Slate 950 */
            color: white;
        }
        .knob-transition {
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- INTERNAL ICON SYSTEM (No External Dependencies) ---
        const Icon = ({ path, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        // Icon Paths
        const ICONS = {
            Headphones: <path d="M3 14v-3a9 9 0 0 1 18 0v3M3 19a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3zM17 14a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2h-2z" />,
            Music: <path d="M9 18V5l12-2v13M9 9l12-2M6 18a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM18 16a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />,
            Sliders: <path d="M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6" />,
            Info: <><circle cx="12" cy="12" r="10" /><line x1="12" y1="16" x2="12" y2="12" /><line x1="12" y1="8" x2="12.01" y2="8" /></>,
            CheckCircle: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14M22 4L12 14.01l-3-3" />,
            Zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
        };

        const DoukT7Visualizer = () => {
            // Knob Configuration
            const MIN_DEG = -150;
            const MAX_DEG = 150;
            const MIN_DB = -6;
            const MAX_DB = 6;

            // Headphone Definitions
            const headphones = {
                lcd2c: {
                    name: "Audeze LCD-2 Classic",
                    desc: "Stock: Warm & Dark. Needs air & upper-mids.",
                    color: "from-amber-700 to-orange-500",
                    iconColor: "text-amber-500",
                    borderColor: "border-amber-500",
                    shadowColor: "shadow-amber-500/20"
                },
                arya: {
                    name: "Hifiman Arya Stealth",
                    desc: "Stock: Bright & Airy. Needs warmth & treble taming.",
                    color: "from-cyan-700 to-blue-500",
                    iconColor: "text-cyan-400",
                    borderColor: "border-cyan-500",
                    shadowColor: "shadow-cyan-400/20"
                }
            };

            const [selectedHeadphone, setSelectedHeadphone] = useState('lcd2c');

            // Helper to convert dB to Degrees
            const dbToDeg = (db) => {
                const rangeDb = MAX_DB - MIN_DB; 
                const rangeDeg = MAX_DEG - MIN_DEG; 
                const ratio = (db - MIN_DB) / rangeDb;
                return ratio * rangeDeg + MIN_DEG;
            };

            // Helper to convert dB to Clock Face
            const dbToClock = (db) => {
                if (Math.abs(db) < 0.2) return "12:00";
                let hourOffset = db / 1.2;
                let hour = 12 + hourOffset;
                if (hour > 12.99) hour -= 12;
                if (hour < 1) hour += 12;
                const h = Math.floor(hour);
                const m = Math.round((hour - h) * 60);
                const mStr = m < 10 ? `0${m}` : m;
                return `${h}:${mStr}`;
            };

            // COMPLETE PRESET DATABASE
            // Values are stored as [LCD-2C Value, Arya Value]
            const categories = {
                calibration: {
                    title: "Base Calibration",
                    icon: ICONS.Info,
                    items: {
                        neutral: {
                            name: "Stock / Neutral (Crinacle)",
                            desc: {
                                lcd2c: "Fixes the 'veil'. Boosts upper mids (2k/4k) to match IEF Neutral. Leaves bass linear.",
                                arya: "Fixes the 'glare'. Cuts the 4kHz and 8kHz peaks. Adds slight body."
                            },
                            values: {
                                64: [0, 1],       // LCD: Flat | Arya: Slight warmth
                                125: [0, 0],
                                250: [0, 0],
                                500: [0, 0],
                                '2k': [1.5, 0],   // LCD: Pinna gain needed | Arya: Good
                                '4k': [4.5, -2],  // LCD: Fix Dip | Arya: Fix Glare
                                '8k': [3, -3]     // LCD: Add Air | Arya: Fix Sibilance
                            }
                        }
                    }
                },
                styles: {
                    title: "Listening Styles",
                    icon: ICONS.Sliders,
                    items: {
                        warmth: {
                            name: "Fuller Bass & Warmth",
                            desc: {
                                lcd2c: "Thickens the low end. Good for old soul/blues.",
                                arya: "ESSENTIAL for Arya. Adds the body/weight that is naturally missing."
                            },
                            values: { 
                                64: [3.5, 4.5],  
                                125: [4, 4],     
                                250: [2, 2],
                                500: [0, 0],
                                '2k': [-1, -1],
                                '4k': [-1, -3],  
                                '8k': [0, -3]    
                            }
                        },
                        energetic: {
                            name: "Energetic & Forward",
                            desc: {
                                lcd2c: "Brings vocals forward. Can be shouty.",
                                arya: "Very aggressive. Only for well-recorded tracks. Watch the treble."
                            },
                            values: {
                                64: [1, 2],
                                125: [0, 1],
                                250: [-1, 0],
                                500: [0, -1],
                                '2k': [2, 0],    
                                '4k': [3, -1],   
                                '8k': [4, 1]     
                            }
                        },
                        crisp: {
                            name: "Crisp Vocals & Detail",
                            desc: {
                                lcd2c: "Restores the 'veil'. Boosts presence.",
                                arya: "Enhances detail but cuts the harsh 8k peak."
                            },
                            values: {
                                64: [0, 1],
                                125: [-1, 0],
                                250: [0, 0],
                                500: [-2.5, -1],
                                '2k': [0, -1],
                                '4k': [3, 0],    
                                '8k': [5, -2]    
                            }
                        },
                        smooth: {
                            name: "Smooth & Relaxed",
                            desc: {
                                lcd2c: "The 'Anti-Shout' special. Cuts 2k.",
                                arya: "The 'De-Esser'. Cuts 4k and 8k significantly to remove harshness."
                            },
                            values: {
                                64: [1, 2.5],
                                125: [1, 2],
                                250: [0, 1],
                                500: [0, 0],
                                '2k': [-3.5, -2],
                                '4k': [-1, -4],   
                                '8k': [2, -4]     
                            }
                        },
                        latenight: {
                            name: "Late Night Listening",
                            desc: {
                                lcd2c: "Loudness curve. Boosts extremes for low volume.",
                                arya: "Boosts bass heavily so it doesn't sound thin at low volume."
                            },
                            values: {
                                64: [4.5, 5],
                                125: [3, 3],
                                250: [1, 1],
                                500: [0, 0],
                                '2k': [-1, -1],
                                '4k': [2, -1],
                                '8k': [5, 1]
                            }
                        },
                        theater: {
                            name: "Theater (Movies)",
                            desc: {
                                lcd2c: "Rumble and dialogue clarity.",
                                arya: "Adds cinematic weight (bass) and keeps dialogue clear but not sharp."
                            },
                            values: {
                                64: [5, 6],       
                                125: [2, 3],
                                250: [0, 1],
                                500: [-2, -1],
                                '2k': [2, 0],
                                '4k': [3, -1],
                                '8k': [4, 0]
                            }
                        }
                    }
                },
                genres: {
                    title: "Music Genres",
                    icon: ICONS.Music,
                    items: {
                        classicrock: {
                            name: "Classic Rock",
                            desc: {
                                lcd2c: "Groove setting. Boosts bass guitar (125Hz).",
                                arya: "Adds warmth to old recordings. Tames high-hat splashiness."
                            },
                            values: {
                                64: [2, 3],
                                125: [3.5, 4],   
                                250: [1, 2],
                                500: [-1.5, -1],
                                '2k': [-3.5, -2],
                                '4k': [0, -2],   
                                '8k': [3, -1]    
                            }
                        },
                        pop: {
                            name: "Pop",
                            desc: {
                                lcd2c: "Fun V-Shape. Sparkle and thump.",
                                arya: "Bass boost is mandatory here. Treble kept neutral."
                            },
                            values: {
                                64: [3, 4],
                                125: [1, 2],
                                250: [-1, 0],
                                500: [-1, -1],
                                '2k': [0, -1],
                                '4k': [2, -1],
                                '8k': [4, 0]
                            }
                        },
                        jazz: {
                            name: "Jazz",
                            desc: {
                                lcd2c: "Highlights cymbals and double bass.",
                                arya: "Focuses on double bass body. Smooths out trumpets."
                            },
                            values: {
                                64: [1, 2],
                                125: [2.5, 3],
                                250: [0, 1],
                                500: [-1, 0],
                                '2k': [-2.5, -2],
                                '4k': [1, -2],    
                                '8k': [3.5, -1]   
                            }
                        },
                        metal: {
                            name: "Metal",
                            desc: {
                                lcd2c: "Impact and anti-shout.",
                                arya: "NEEDS IMPACT. High bass boost. Cuts treble to stop cymbal fatigue."
                            },
                            values: {
                                64: [4, 5],      
                                125: [1.5, 3],   
                                250: [0, 1],
                                500: [-2, -1],
                                '2k': [-3, -2],
                                '4k': [0.5, -2], 
                                '8k': [4, -1]    
                            }
                        },
                        stoner: {
                            name: "Stoner Metal",
                            desc: {
                                lcd2c: "Wall of sound. Fuzz boost.",
                                arya: "Thickens the sound significantly to mimic a dark room."
                            },
                            values: {
                                64: [2.5, 4],
                                125: [4.5, 5],   
                                250: [3, 3],
                                500: [0, 1],
                                '2k': [-2, -2],
                                '4k': [-1, -3],
                                '8k': [1, -3]
                            }
                        },
                        acoustic: {
                            name: "Acoustic",
                            desc: {
                                lcd2c: "Highlights string texture.",
                                arya: "Natural habitat. Slight bass boost to body."
                            },
                            values: {
                                64: [0, 1],
                                125: [-2, 0],
                                250: [0, 0],
                                500: [-1, -1],
                                '2k': [0, -1],
                                '4k': [2.5, 0],
                                '8k': [4.5, 1]
                            }
                        },
                        classical: {
                            name: "Classical",
                            desc: {
                                lcd2c: "Restores air and soundstage.",
                                arya: "Adds cello weight. Very minimal EQ needed otherwise."
                            },
                            values: {
                                64: [0.5, 2],
                                125: [0, 1],
                                250: [0, 0],
                                500: [0, 0],
                                '2k': [1, 0],
                                '4k': [2, -1],
                                '8k': [4, 0]
                            }
                        },
                        electronic: {
                            name: "Electronic/Dance",
                            desc: {
                                lcd2c: "Sub-bass rumble party.",
                                arya: "Turns the Arya into a bass cannon (as much as possible)."
                            },
                            values: {
                                64: [5.5, 6],    
                                125: [2, 3],
                                250: [-1, 0],
                                500: [-2, -1],
                                '2k': [-1, -1],
                                '4k': [2, 0],
                                '8k': [5, 1]
                            }
                        },
                        rnb: {
                            name: "R&B",
                            desc: {
                                lcd2c: "Silky vocals and warmth.",
                                arya: "Smooths sibilant vocals. Boosts bass line."
                            },
                            values: {
                                64: [2.5, 3.5],
                                125: [3, 3.5],
                                250: [1, 1],
                                500: [0, 0],
                                '2k': [-1.5, -1],
                                '4k': [0, -2],
                                '8k': [3, -2]
                            }
                        },
                        rap: {
                            name: "Rap",
                            desc: {
                                lcd2c: "Heavy 808s.",
                                arya: "Compensates for light bass impact. Tames hi-hats."
                            },
                            values: {
                                64: [5, 6],
                                125: [1, 2],
                                250: [0, 0],
                                500: [-1, -1],
                                '2k': [1.5, 0],
                                '4k': [1, -1],
                                '8k': [3, -1]
                            }
                        },
                        country: {
                            name: "Country",
                            desc: {
                                lcd2c: "Twang enhancer.",
                                arya: "Adds body to acoustic guitars. Cuts vocal pierce."
                            },
                            values: {
                                64: [1, 2],
                                125: [2, 2.5],
                                250: [2, 1],
                                500: [-1, 0],
                                '2k': [1.5, -1],
                                '4k': [2.5, -1],
                                '8k': [2, -1]
                            }
                        },
                        funk: {
                            name: "Funk & Soul",
                            desc: {
                                lcd2c: "Bass guitar focus.",
                                arya: "Adds groove weight. Keeps rhythm guitar clean."
                            },
                            values: {
                                64: [2, 3],
                                125: [4, 4],
                                250: [0, 1],
                                500: [-1, -1],
                                '2k': [0, -1],
                                '4k': [2.5, 0],
                                '8k': [3, 0]
                            }
                        },
                        reggae: {
                            name: "Reggae",
                            desc: {
                                lcd2c: "Earth shaking.",
                                arya: "Attempts to make the Arya a bass-monster."
                            },
                            values: {
                                64: [4.5, 5.5],
                                125: [5, 5],
                                250: [1, 2],
                                500: [0, 0],
                                '2k': [-1, -1],
                                '4k': [-1, -2],
                                '8k': [1, -2]
                            }
                        }
                    }
                }
            };

            const [activePresetKey, setActivePresetKey] = useState('neutral');
            const [activeCategory, setActiveCategory] = useState('calibration'); 

            // Handle HP Selection: Default to "Neutral" preset on switch
            const handleHeadphoneSwitch = (key) => {
                setSelectedHeadphone(key);
                setActivePresetKey('neutral');
                setActiveCategory('calibration');
            };

            // Flatten logic
            const allPresets = { 
                ...categories.calibration.items,
                ...categories.styles.items, 
                ...categories.genres.items 
            };
            const activePreset = allPresets[activePresetKey];
            
            // Get Values based on Headphone Index (0 for LCD, 1 for Arya)
            const hpIndex = selectedHeadphone === 'lcd2c' ? 0 : 1;
            
            const currentValues = {};
            if (activePreset) {
                Object.keys(activePreset.values).forEach(key => {
                    currentValues[key] = activePreset.values[key][hpIndex];
                });
            }

            // Get description text
            const currentDesc = activePreset ? activePreset.desc[selectedHeadphone] : "";

            return (
                <div className="min-h-screen bg-slate-950 text-slate-100 font-sans p-4 md:p-8 flex flex-col items-center selection:bg-purple-500 selection:text-white">
                    
                    {/* Header */}
                    <div className="w-full max-w-6xl mb-6 text-center pt-2">
                        <h1 className="text-3xl md:text-5xl font-black bg-gradient-to-r from-slate-200 via-white to-slate-200 bg-clip-text text-transparent mb-2 tracking-tight">
                            DOUK T7 <span className={selectedHeadphone === 'lcd2c' ? 'text-amber-500' : 'text-cyan-400'}>TUNER</span>
                        </h1>
                        <p className="text-slate-400 text-sm font-medium uppercase tracking-widest">Digital Knob Assistant</p>
                    </div>

                    {/* Headphone Selector */}
                    <div className="w-full max-w-3xl grid grid-cols-2 gap-6 mb-8">
                        {Object.entries(headphones).map(([key, hp]) => (
                            <button
                                key={key}
                                onClick={() => handleHeadphoneSwitch(key)}
                                className={`relative p-5 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center gap-2 overflow-hidden group ${
                                    selectedHeadphone === key 
                                        ? `bg-slate-900 ${hp.borderColor} shadow-2xl ${hp.shadowColor} scale-[1.02]` 
                                        : 'bg-slate-900/40 border-slate-800 hover:bg-slate-800 hover:border-slate-700 opacity-60 hover:opacity-100'
                                }`}
                            >
                                <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${hp.color} opacity-80`}></div>
                                <div className="flex items-center gap-3 z-10">
                                    <Icon path={ICONS.Headphones} size={24} className={selectedHeadphone === key ? hp.iconColor : 'text-slate-500'} />
                                    <span className={`font-bold text-lg ${selectedHeadphone === key ? 'text-white' : 'text-slate-400'}`}>{hp.name}</span>
                                </div>
                                {selectedHeadphone === key && (
                                    <div className={`absolute -right-3 -bottom-3 opacity-10 text-${hp.iconColor.split('-')[1]}`}>
                                        <Icon path={ICONS.CheckCircle} size={64} />
                                    </div>
                                )}
                                
                                {/* Stock Description Overlay */}
                                {selectedHeadphone === key && (
                                    <span className="text-[10px] text-slate-400 mt-1 font-mono bg-slate-950/50 px-2 py-1 rounded">
                                        Click to Reset to Stock (Crinacle)
                                    </span>
                                )}
                            </button>
                        ))}
                    </div>

                    <div className="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        {/* LEFT COLUMN: Controls */}
                        <div className="lg:col-span-5 flex flex-col gap-6">
                            
                            {/* Listening Styles Section */}
                            <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-5 shadow-lg backdrop-blur-sm relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-20 h-20 bg-purple-500/5 rounded-full blur-2xl"></div>
                                <h2 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2 relative z-10">
                                    <Icon path={categories.styles.icon} size={16} />
                                    {categories.styles.title}
                                </h2>
                                <div className="grid grid-cols-2 gap-2 relative z-10">
                                    {Object.entries(categories.styles.items).map(([key, item]) => (
                                        <button
                                            key={key}
                                            onClick={() => { setActiveCategory('styles'); setActivePresetKey(key); }}
                                            className={`px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 text-left relative overflow-hidden group ${
                                                activePresetKey === key 
                                                    ? `bg-slate-800 text-white border-l-4 ${selectedHeadphone === 'lcd2c' ? 'border-amber-500' : 'border-cyan-500'} shadow-lg` 
                                                    : 'bg-slate-800/40 text-slate-400 border border-transparent hover:bg-slate-800'
                                            }`}
                                        >
                                            <span className="relative z-10">{item.name}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Music Genres Section */}
                            <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-5 shadow-lg backdrop-blur-sm relative overflow-hidden">
                                <div className="absolute bottom-0 left-0 w-20 h-20 bg-blue-500/5 rounded-full blur-2xl"></div>
                                <h2 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2 relative z-10">
                                    <Icon path={categories.genres.icon} size={16} />
                                    {categories.genres.title}
                                </h2>
                                <div className="grid grid-cols-2 sm:grid-cols-3 gap-2 relative z-10">
                                    {Object.entries(categories.genres.items).map(([key, item]) => (
                                        <button
                                            key={key}
                                            onClick={() => { setActiveCategory('genres'); setActivePresetKey(key); }}
                                            className={`px-2 py-2 rounded-lg text-xs font-medium transition-all duration-200 text-center border ${
                                                activePresetKey === key 
                                                    ? `bg-slate-800 text-white ${selectedHeadphone === 'lcd2c' ? 'border-amber-500/50' : 'border-cyan-500/50'} shadow-md` 
                                                    : 'bg-slate-800/40 text-slate-400 border-transparent hover:bg-slate-800'
                                            }`}
                                        >
                                            {item.name}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* RIGHT COLUMN: Visualizer */}
                        <div className="lg:col-span-7 flex flex-col gap-6">
                            
                            {/* Main Panel */}
                            <div className="w-full bg-slate-900 rounded-3xl border border-slate-700 p-6 md:p-8 shadow-2xl relative overflow-hidden flex-grow flex flex-col justify-center min-h-[420px]">
                                {/* Background Glow */}
                                <div className={`absolute top-0 left-0 w-full h-1 opacity-60 bg-gradient-to-r ${selectedHeadphone === 'lcd2c' ? 'from-amber-600 via-orange-500 to-amber-600' : 'from-cyan-600 via-blue-500 to-cyan-600'}`}></div>
                                
                                {/* Ambient Light */}
                                <div className={`absolute -top-32 -right-32 w-96 h-96 bg-gradient-to-br ${selectedHeadphone === 'lcd2c' ? 'from-amber-900/30' : 'from-cyan-900/30'} to-transparent rounded-full blur-3xl pointer-events-none transition-colors duration-500`}></div>

                                {/* Info Box */}
                                <div className="mb-10 relative z-10 transition-all duration-300">
                                    <div className="flex items-center justify-between mb-3">
                                        <h3 className={`text-3xl font-bold ${selectedHeadphone === 'lcd2c' ? 'text-amber-100' : 'text-cyan-100'}`}>
                                            {activePreset.name}
                                        </h3>
                                        <span className={`text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded-full ${selectedHeadphone === 'lcd2c' ? 'bg-amber-950 text-amber-400 border border-amber-900' : 'bg-cyan-950 text-cyan-400 border border-cyan-900'}`}>
                                            {selectedHeadphone === 'lcd2c' ? 'Audeze Mode' : 'Arya Mode'}
                                        </span>
                                    </div>
                                    <div className="flex items-start gap-3">
                                        <Icon path={ICONS.Info} size={18} className={`mt-0.5 shrink-0 ${selectedHeadphone === 'lcd2c' ? 'text-amber-500' : 'text-cyan-500'}`} />
                                        <p className="text-slate-300 text-sm leading-relaxed">
                                            {currentDesc}
                                        </p>
                                    </div>
                                </div>

                                {/* Knobs Container */}
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-y-12 gap-x-2 justify-items-center relative z-10">
                                    {[
                                        { label: '64 Hz', key: '64' },
                                        { label: '125 Hz', key: '125' },
                                        { label: '250 Hz', key: '250' },
                                        { label: '500 Hz', key: '500' },
                                        { label: '2 kHz', key: '2k' }, 
                                        { label: '4 kHz', key: '4k' },
                                        { label: '8 kHz', key: '8k' },
                                    ].map((band) => (
                                        <Knob 
                                            key={band.key}
                                            label={band.label}
                                            value={currentValues[band.key]}
                                            hpType={selectedHeadphone}
                                            dbToDeg={dbToDeg}
                                            dbToClock={dbToClock}
                                        />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Knob = ({ label, value, hpType, dbToDeg, dbToClock }) => {
            const rotation = dbToDeg(value);
            const isBoost = value > 0.1;
            const isCut = value < -0.1;

            // Colors based on HP Type
            const accentColor = hpType === 'lcd2c' ? 'bg-amber-500' : 'bg-cyan-400';
            const glowColor = hpType === 'lcd2c' ? 'shadow-amber-500/40' : 'shadow-cyan-400/40';
            const cutColor = 'bg-rose-500';
            const cutGlow = 'shadow-rose-500/40';

            let indicatorClass = 'bg-slate-500';
            let knobShadow = '';

            if (isBoost) {
                indicatorClass = accentColor;
                knobShadow = `shadow-[0_0_20px_-5px] ${glowColor}`;
            } else if (isCut) {
                indicatorClass = cutColor;
                knobShadow = `shadow-[0_0_20px_-5px] ${cutGlow}`;
            }

            return (
                <div className="flex flex-col items-center group w-full">
                    {/* Label */}
                    <span className="text-[10px] md:text-xs font-bold tracking-widest uppercase mb-4 text-slate-400">{label}</span>

                    {/* Knob Body */}
                    <div className="relative w-16 h-16 md:w-20 md:h-20">
                        {/* Tick Marks Ring */}
                        <svg className="w-full h-full absolute inset-0 pointer-events-none opacity-40" viewBox="0 0 100 100">
                            <path d="M 20 80 A 40 40 0 1 1 80 80" fill="none" stroke="#334155" strokeWidth="6" strokeLinecap="round" />
                            <line x1="50" y1="5" x2="50" y2="12" stroke="#64748b" strokeWidth="2" /> {/* 12 */}
                            <line x1="20" y1="80" x2="26" y2="74" stroke="#64748b" strokeWidth="2" /> {/* 7 */}
                            <line x1="80" y1="80" x2="74" y2="74" stroke="#64748b" strokeWidth="2" /> {/* 5 */}
                        </svg>

                        {/* Rotating Knob */}
                        <div 
                            className={`w-12 h-12 md:w-14 md:h-14 bg-slate-800 rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-2 border-slate-700 flex items-center justify-center knob-transition ${knobShadow}`}
                            style={{ 
                                transform: `translate(-50%, -50%) rotate(${rotation}deg)`,
                            }}
                        >
                            {/* Indicator Line */}
                            <div className={`w-1 h-5 md:h-6 rounded-full absolute -top-0.5 ${indicatorClass} shadow-sm transition-colors duration-300`}></div>
                            <div className="w-full h-full rounded-full bg-gradient-to-tr from-white/10 to-transparent pointer-events-none"></div>
                        </div>
                    </div>

                    {/* Values Display */}
                    <div className="mt-3 flex flex-col items-center gap-1">
                        <div className={`flex items-center justify-center min-w-[3rem] px-2 py-0.5 rounded-full border border-slate-800 bg-slate-900/80 ${isBoost || isCut ? 'text-white' : 'text-slate-500'}`}>
                            <span className="text-sm font-mono font-bold">
                                {value > 0 ? '+' : ''}{value}
                            </span>
                        </div>
                        <span className="text-[10px] font-mono text-slate-500 tracking-tight">{dbToClock(value)}</span>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DoukT7Visualizer />);
    </script>
</body>
</html>


